

maybe we need to hide the resource management. 

use heap for private on both
use heap for shared on ios, managed for shared on osx

declare a resource as private or not, then allocate it. 

i guess lets first create api for ios, then try to transfer to macos


do we allow creating heaps, or do we handle it?
i don't think user needs to query heap properties. 


goal:
be able to create resources, buffers and textures, shared or private.
populate them, read them, convert, destroy. 
know how to synchronize.


first of all, what can we do with managed? how does that work?
we just create a resource on the device and delcare storage mode managed.


when to create multiple heaps?
maybe we create multiple heaps in the backend, depending on size. we have buckets according to size and maybe type, we can easily put something in a bucket. and change the uckets as we go.

so api is:
create a texture or buffer, shared or private. we can separate textures and buffers. shared or not is kind of fundamental, maybe should have different types, but then how to name?
CPUTexture::
GPUTexture::


we have buffer now. we need more than that. 
now what? go for resources. 



ZKP

how to get nonuniformity?
i guess extract out instructions of each type and use uniformity to prove them together.
this requires advice, unless the partition (of instructions) is verifier known. 
but we're no longer afraid of advice. we want to make maximum use of it. 

so the challenge becomes, how to manage the translation between hetergenous (original computation form), and specialized (form for checking).
one way is to commit them in specialized form, and translate to the original form, maybe easier than going opposite way.
our strategy now is ot use as much advice as we need to achieve the flexibility we want. 

for spectrum, we'll do sumcheck with larger degree in each var. eg sqrt size. 






